{"version":3,"sources":["webpack:///E:/项目/直纯堂/components/Share-moments.vue?2e98","webpack:///E:/项目/直纯堂/components/Share-moments.vue?a802","webpack:///E:/项目/直纯堂/components/Share-moments.vue?81ab","webpack:///E:/项目/直纯堂/components/Share-moments.vue?95da","webpack:///E:/项目/直纯堂/components/Share-moments.vue","webpack:///E:/项目/直纯堂/components/Share-moments.vue?29a6","webpack:///E:/项目/直纯堂/components/Share-moments.vue?69da"],"names":["props","path","type","String","default","csene","title","backImage","data","poster","qrShow","tipsText","methods","momentTap","uni","authorize","scope","success","res","makeBill","fail","err","showModal","content","confirm","openSetting","that","console","log","showLoading","mask","request","url","http","method","obj","qrcodeUrl","static","posterCanvasId","$makeBill","d","tempFilePath","finalPath","saveImageToPhotosAlbum","filePath","icon","hideQr"],"mappings":"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","file":"components/Share-moments.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./Share-moments.vue?vue&type=template&id=80c4983c&\"\nvar renderjs\nimport script from \"./Share-moments.vue?vue&type=script&lang=js&\"\nexport * from \"./Share-moments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Share-moments.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"E:/项目/直纯堂/components/Share-moments.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Share-moments.vue?vue&type=template&id=80c4983c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Share-moments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Share-moments.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops:{\n\t\tpath:{\n\t\t\ttype:String,\n\t\t\tdefault(){\n\t\t\t\treturn ''\n\t\t\t}\n\t\t},\n\t\tcsene:{\n\t\t\ttype:String,\n\t\t\tdefault(){\n\t\t\t\treturn ''\n\t\t\t}\n\t\t},\n\t\ttitle:{\n\t\t\ttype:String,\n\t\t\tdefault(){\n\t\t\t\treturn ''\n\t\t\t}\n\t\t},\n\t\tbackImage:{\n\t\t\ttype:String,\n\t\t\tdefault(){\n\t\t\t\treturn ''\n\t\t\t}\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tposter: {},\n\t\t\tqrShow: false,\n\t\t\ttipsText:'保存到相册...'\n\t\t}\n\t},\n\tmethods:{\n\t\tmomentTap(){\n\t\t\t// 获取用户授权\n\t\t\tuni.authorize({\n\t\t\t\tscope:'scope.writePhotosAlbum',\n\t\t\t\tsuccess:(res) => {\n\t\t\t\t\t// 制作海报\n\t\t\t\t\tthis.makeBill()\n\t\t\t\t},\n\t\t\t\tfail:(err) => {\n\t\t\t\t\t// 用户授权失败，弹出弹窗\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle:'温馨提示',\n\t\t\t\t\t\tcontent:'请开启保存到相册的权限，开启后请重新生成海报',\n\t\t\t\t\t\tsuccess:(res) => {\n\t\t\t\t\t\t\tif(res.confirm){\n\t\t\t\t\t\t\t\tuni.openSetting()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tmakeBill(){\n\t\t\tconst that = this\n\t\t\tconsole.log(this.csene)\n\t\t\tconsole.log(this.path)\n\t\t\tuni.showLoading({\n\t\t\t\ttitle:'正在生成图片...',\n\t\t\t\tmask:true\n\t\t\t})\n\t\t\tuni.request({\n\t\t\t\turl: this.http+'/knowledge/code',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: {\n\t\t\t\t\tpath:this.path,\n\t\t\t\t\tcsene:this.csene\n\t\t\t\t},\n\t\t\t\tsuccess:async (res) =>  {\t\n\t\t\t\t\tconst obj = {\n\t\t\t\t\t\ttitle:that.title,\n\t\t\t\t\t\tbackImage:that.backImage,\n\t\t\t\t\t\tqrcodeUrl:that.static + res.data.data,\n\t\t\t\t\t\tposterCanvasId:'posterCanvasId2',\n\t\t\t\t\t}\n\t\t\t\t\t// 开始制作海报\n\t\t\t\t\tconst d = await this.$makeBill(obj)\n\t\t\t\t\tif(d.poster.tempFilePath){\n\t\t\t\t\t\t// 图片制作成功\n\t\t\t\t\t\tthis.poster.finalPath = d.poster.tempFilePath;\n\t\t\t\t\t\tthis.qrShow = true\n\t\t\t\t\t\t// 发起保存图片到本地的请求\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\t\tfilePath:d.poster.tempFilePath,\n\t\t\t\t\t\t\tsuccess:() => {\n\t\t\t\t\t\t\t\t// 保存成功\n\t\t\t\t\t\t\t\tthis.tipsText = '已保存到相册，快去分享吧'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail:() => {\n\t\t\t\t\t\t\t\t// 保存失败\n\t\t\t\t\t\t\t\tthis.tipsText = '保存相册失败'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle:'图片生成失败，请重新点击',\n\t\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\thideQr(){\n\t\t\tthis.qrShow = false\n\t\t}\n\t}\n}\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Share-moments.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Share-moments.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588228833588\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}