(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/confirmOrder"],{"032c":function(t,e,i){"use strict";var a,o=function(){var t=this,e=t.$createElement,a=(t._self._c,i("74f5")),o=i("1a5a"),n=i("18bc");t.$mp.data=Object.assign({},{$root:{m0:a,m1:o,m2:n}})},n=[];i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}))},1599:function(t,e,i){"use strict";i.r(e);var a=i("032c"),o=i("fb94");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("a061");var s,c=i("f0c5"),u=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=u.exports},"623e":function(t,e,i){},"84cf":function(t,e,i){"use strict";(function(t){i("b822"),i("921b");a(i("66fd"));var e=a(i("1599"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},a061:function(t,e,i){"use strict";var a=i("623e"),o=i.n(a);o.a},c064:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{specificat:!1,popo:!1,item:[],list:"",current:0,counpId:"",show:"",invite_code:""}},onLoad:function(e){this.authKey=t.getStorageSync("authKey");try{this.item=JSON.parse(decodeURIComponent(e.data))}catch(i){this.item=JSON.parse(e.data)}console.log(this.item),this.coupons()},methods:{discounts:function(){this.specificat=!0},coupons:function(){var e=this;t.request({url:this.http+"home/coupons",method:"GET",header:{authKey:this.authKey},data:{type:0},success:function(t){if(console.log(t.data),200==t.data.code&&(e.list=t.data.data.list,""!=e.list)){e.show=t.data.data.list[0].amount+"元优惠券";var i=t.data.data.list[0].amount;e.counpId=t.data.data.list[0].id,e.item.amount=e.item.amount-i}}})},radioChange:function(t){for(var e=0;e<this.list.length;e++)if(this.list[e].id===t.target.value){this.current=e;break}},choose:function(t){1==t?(this.specificat=!1,this.show="不使用优惠券",this.counpId="",this.item.amount=this.item.amount):(this.specificat=!1,this.show=t.amount+"元优惠券",this.counpId=t.id,this.item.amount=this.item.amount-t.amount,console.log(this.item))},discountsClose:function(){this.specificat=!1},pay:function(){var e=this;t.request({url:this.http+"order/submit",method:"POST",header:{authKey:this.authKey},data:{product_id:this.item.item.product_id,sku_id:this.item.item.sku_id,assemble_id:this.item.item.assemble_id,coupon_id:this.counpId,invite_code:this.item.item.invite_code},success:function(i){if(console.log(i.data),200==i.data.code){var a=i.data.data;t.login({provider:"weixin",success:function(i){i.code?wx.request({url:"https://zct.51kdd.com/index.php",data:{code:i.code},success:function(i){wx.requestPayment({timeStamp:a.timestamp,nonceStr:a.noncestr,package:a.package,signType:"MD5",paySign:a.paysign,success:function(i){console.log(e.item.item.assemble_id),""!=e.item.item.assemble_id?t.request({url:e.http+"order/detail/"+a.order_id,method:"GET",header:{authKey:e.authKey},data:{},success:function(i){200==i.data.code&&(console.log(i.data),t.request({url:e.http+"assemble/detail/"+i.data.data.assemble_id,method:"GET",header:{authKey:e.authKey},data:{},success:function(e){if(200==e.data.code)return console.log(e.data),0==e.data.data.can_join?void t.navigateTo({url:"/pages/groupSuccess/groupSuccess?id="+a.order_id}):void t.navigateTo({url:"/pages/groupSuccess/spellGroup?id="+a.order_id})}}))}}):e.popo=!0},fail:function(e){t.showToast({title:"支付失败",icon:"none",duration:1500})},complete:function(t){console.log(t)}})}}):console.log("获取用户登录态失败！"+i.errMsg)}})}}})},godetail:function(){t.navigateTo({url:"/pages/order/order?tabIndex=0"}),this.popo=!1},close:function(){this.popo=!1}}};e.default=i}).call(this,i("543d")["default"])},fb94:function(t,e,i){"use strict";i.r(e);var a=i("c064"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a}},[["84cf","common/runtime","common/vendor"]]]);