(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/reservationService/coldCalling"],{"04bd":function(t,e,a){"use strict";(function(t){a("b822"),a("921b");i(a("66fd"));var e=i(a("e33a"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},1272:function(t,e,a){"use strict";a.r(e);var i=a("7bf0"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},"3a68":function(t,e,a){"use strict";var i,s=function(){var t=this,e=t.$createElement,i=(t._self._c,a("2260")),s=a("2260"),n=a("3066"),o=a("98c0"),d=a("1a5a"),r=a("18bc");t.$mp.data=Object.assign({},{$root:{m0:i,m1:s,m2:n,m3:o,m4:d,m5:r}})},n=[];a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}))},5540:function(t,e,a){},"7bf0":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{eyeImg1:!1,popo:!1,li:"",tid:"",jid:"",ajid:"",order_id:"",addressId:"",massagist_id:"",date:"",begin:"",end:"",value:"",free:"",can:"",selected:!1,aa:"",times:"",remark:"",use_reduce:0,remarks:[],tagg:[{value:"可提前来"},{value:"准时服务"},{value:"来前联系"}],door_free:"",lidetail:""}},computed:{labels:function(){return this.remarks.join("，")}},onLoad:function(e){this.authKey=t.getStorageSync("authKey"),this.biId=e.id,this.orderD(),this.orderR(),this.orderCan(),this.orderAdress()},onShow:function(){var e=t.getStorageSync("jishi"),a=t.getStorageSync("address"),i=t.getStorageSync("date"),s=t.getStorageSync("begin"),n=t.getStorageSync("end"),o=t.getStorageSync("value");e?this.li=e:this.teach(),a&&(this.aa=a),o&&(this.date=i,this.begin=s,this.end=n,this.times=o)},methods:{teach:function(){var e=this;t.request({url:this.http+"home/myMassagists",method:"GET",header:{authKey:this.authKey},data:{},success:function(t){if(200==t.data.code){var a=t.data.data[0];a.avatarurl=e.static+a.avatarurl,e.li=a,e.jid=t.data.data[0].id}}})},orderD:function(){var e=this;t.request({url:this.http+"order/detail/"+this.biId,method:"GET",header:{authKey:this.authKey},data:{},success:function(t){200==t.data.code&&(e.door_free=t.data.data.product.drop_in_fee)}})},orderR:function(){var e=this;t.request({url:this.http+"home/reduce",method:"GET",header:{authKey:this.authKey},data:{},success:function(t){200==t.data.code&&(e.free=t.data.data)}})},orderCan:function(){var e=this;t.request({url:this.http+"appointment/canichoose",method:"GET",header:{authKey:this.authKey},data:{},success:function(t){200==t.data.code&&(e.can=t.data.data)}})},orderAdress:function(){var e=this;this.addressId&&t.request({url:this.http+"home/getAddressDetail/"+this.addressId,method:"GET",header:{authKey:this.authKey},data:{},success:function(t){200==t.data.code&&(e.aa=t.data.data)}})},remarkInput:function(t){this.remark=t.target.value},tag:function(t){this.remark.indexOf(t.value)<0&&this.remarks.push(t.value),this.remark+=t.value},bindEye:function(){this.eyeImg1=!this.eyeImg1,1==this.eyeImg1?(this.door_free=0,this.use_reduce=1):this.use_reduce=0},tiji:function(){var e=this;if(this.aa)if(this.times){var a=this;this.date=this.date.replace("-",""),t.request({url:this.http+"appointment/create",method:"POST",header:{authKey:this.authKey},data:{mode:2,order_id:this.biId,address_id:this.aa.id,massagist_id:this.li.id,date:this.date,begin:this.begin,end:this.end,remark:this.remark,use_reduce:this.use_reduce},success:function(i){var s=i.data.data;e.order_id=s.order_id,200==i.data.code?s.paysign?t.login({provider:"weixin",success:function(e){e.code?wx.request({url:"https://zct.51kdd.com/index.php",data:{code:e.code},success:function(e){console.log(e.data),console.log(s,s.timestamp),wx.requestPayment({timeStamp:s.timestamp,nonceStr:s.noncestr,package:s.package,signType:"MD5",paySign:s.paysign,success:function(e){console.log(e),a.popo=!0,t.showToast({title:"支付成功",icon:"none",duration:1500})},fail:function(e){t.showToast({title:"支付失败",icon:"none",duration:1500})},complete:function(t){console.log(t)}})}}):console.log("获取用户登录态失败！"+e.errMsg)}}):e.popo=!0:t.showToast({title:i.data.error,icon:"none",duration:1500})}})}else t.showToast({title:"请填写上门时间",icon:"none"});else t.showToast({title:"请填写上门地址",icon:"none"})},close:function(){this.popo=!1},godetail:function(){t.navigateTo({url:"/pages/appointmentDetail/appointmentDetail?id="+this.order_id})},goaddress:function(){t.navigateTo({url:"/pages/choose/address?id="+this.biId+"&jid="+this.ajid+"&sid=1"})},gotimes:function(){t.navigateTo({url:"/pages/choose/times?id="+this.biId+"&jid="+this.li.id+"&sid=1"})},gotech:function(){t.navigateTo({url:"/pages/choose/technicians?id="+this.biId+"&sid=1"})}}};e.default=a}).call(this,a("543d")["default"])},"9bc8":function(t,e,a){"use strict";var i=a("5540"),s=a.n(i);s.a},e33a:function(t,e,a){"use strict";a.r(e);var i=a("3a68"),s=a("1272");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("9bc8");var o,d=a("f0c5"),r=Object(d["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=r.exports}},[["04bd","common/runtime","common/vendor"]]]);