(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/collection/collection"],{"0b55":function(t,e,n){"use strict";var a,o=function(){var t=this,e=t.$createElement,a=(t._self._c,n("1557")),o=n("5dd8");t.$mp.data=Object.assign({},{$root:{m0:a,m1:o}})},r=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))},"141d":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("4795"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,a,o,r,i){try{var s=t[r](i),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(a,o)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function s(t){r(i,a,o,s,c,"next",t)}function c(t){r(i,a,o,s,c,"throw",t)}s(void 0)}))}}var s=function(){n.e("components/uni-load-more").then(function(){return resolve(n("37d8"))}.bind(null,n)).catch(n.oe)},c={components:{uniLoadMore:s},data:function(){return{tabBars:"",scrollLeft:0,tabIndex:0,authKey:"",symbolId:"",lists:"",loadingType:0,next:-1,start:0,size:15,record:!1,bottom:!1,give:"",token:""}},onLoad:function(e){this.authKey=t.getStorageSync("authKey"),this.requestLearn()},onShow:function(){this.start=0},onReachBottom:function(){2!=this.loadingType&&this.requestLearnList(!1)},methods:{getElSize:function(e){return console.log(e),new Promise((function(n,a){t.createSelectorQuery().select("#"+e).fields({size:!0,scrollOffset:!0},(function(t){n(t)})).exec()}))},tapTab:function(t){var e=this;return i(a.default.mark((function n(){var o,r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.symbolId=t.currentTarget.id,console.log(e.symbolId),e.tabIndex!==t.target.dataset.current){n.next=6;break}return n.abrupt("return",!1);case 6:return n.next=8,e.getElSize("tab-bar");case 8:o=n.sent,r=o.scrollLeft,e.scrollLeft=r,e.isClickChange=!0,e.tabIndex=t.target.dataset.current;case 13:e.start=0,e.requestLearnList();case 15:case"end":return n.stop()}}),n)})))()},requestLearn:function(){var e=this,n=this;t.request({url:this.http+"knowledge/category",method:"GET",header:{authKey:this.authKey},data:{},success:function(t){console.log(t.data),200==t.data.code&&(n.tabBars=t.data.data,n.symbolId=t.data.data[0].id,e.requestLearnList())}})},requestLearnList:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n&&t.showLoading({title:"加载中"});var a=this;a.loadingType=1;var o="?start="+this.start+"&size="+this.size;t.request({url:this.http+"collection/list"+o,method:"GET",header:{authKey:this.authKey},data:{category_id:a.symbolId},success:function(t){var n=t.data.data,a=e;if(200==t.data.code){var o=n.list;o.forEach((function(t){t.cover_src=a.static+t.cover_src})),0==a.start&&(a.lists=[]),a.lists=a.lists.concat(o),a.start=n.next,o.length<a.size||-1==a.start?a.loadingType=2:a.loadingType=0,0==a.lists.length?a.record=!0:a.record=!1}},fail:function(){console.log("请求失败")},complete:function(){n&&t.hideLoading()}})},cancel:function(e){var n=this;t.request({url:this.http+"collection/remove/"+this.lists[e].id,method:"GET",header:{authKey:this.authKey},data:{},success:function(a){console.log(a.data),200==a.data.code&&(t.showToast({title:"取消收藏成功",icon:"none",mask:!1,duration:1500}),n.lists.splice(e,1))}})},goDetail:function(e){t.navigateTo({url:"/pages/knowledge/detail?id="+e})},lower:function(){2!=this.loadingType&&this.requestLearnList(!1)}}};e.default=c}).call(this,n("543d")["default"])},1631:function(t,e,n){},"236f":function(t,e,n){"use strict";n.r(e);var a=n("141d"),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=o.a},"9ee7":function(t,e,n){"use strict";n.r(e);var a=n("0b55"),o=n("236f");for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("e65f");var i,s=n("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);e["default"]=c.exports},daf1:function(t,e,n){"use strict";(function(t){n("b822"),n("921b");a(n("66fd"));var e=a(n("9ee7"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},e65f:function(t,e,n){"use strict";var a=n("1631"),o=n.n(a);o.a}},[["daf1","common/runtime","common/vendor"]]]);