(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/service/detail"],{"03cc":function(e,t,i){"use strict";i.r(t);var s=i("0bb1"),a=i("2285");for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);i("7bc1");var o,c=i("f0c5"),r=Object(c["a"])(a["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],o);t["default"]=r.exports},"06fe":function(e,t,i){"use strict";(function(e){i("b822"),i("921b");s(i("66fd"));var t=s(i("03cc"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},"0bb1":function(e,t,i){"use strict";var s,a=function(){var e=this,t=e.$createElement,s=(e._self._c,i("babc")),a=i("4157"),n=i("545f"),o=i("2f64"),c=i("1d16"),r=i("1a5a"),u=i("1a5a"),d=i("1a5a"),l=i("1a5a"),h=i("74f5");e.$mp.data=Object.assign({},{$root:{m0:s,m1:a,m2:n,m3:o,m4:c,m5:r,m6:u,m7:d,m8:l,m9:h}})},n=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return s}))},2285:function(e,t,i){"use strict";i.r(t);var s=i("d592"),a=i.n(s);for(var n in s)"default"!==n&&function(e){i.d(t,e,(function(){return s[e]}))}(n);t["default"]=a.a},"7bc1":function(e,t,i){"use strict";var s=i("fdb0"),a=i.n(s);a.a},d592:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(i("4795"));function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,i,s,a,n,o){try{var c=e[n](o),r=c.value}catch(u){return void i(u)}c.done?t(r):Promise.resolve(r).then(s,a)}function o(e){return function(){var t=this,i=arguments;return new Promise((function(s,a){var o=e.apply(t,i);function c(e){n(o,s,a,c,r,"next",e)}function r(e){n(o,s,a,c,r,"throw",e)}c(void 0)}))}}var c={data:function(){return{path:"pages/service/detail",tabBars:[{name:"服务介绍",id:1},{name:"服务保障",id:2},{name:"关于我们",id:3}],scrollLeft:0,tabIndex:0,symbolId:"",spellGroup:!1,specificat:!1,specificatbuy:!1,specificatbuycan:!1,biId:"",authKey:"",content:"",carousel:"",skus:"",assemble_skus:"",price_minA:"",price_minN:"",prices:"",priceA:"",buyTimes:"",specif:"",specG:"",evaluate:"",number:"",count:"",assemble:"",normal:"",group:"",index:-1,agindex:-1,azindex:-1,bsku_id:"",cassemble_id:"",invite_code:"",bassemble_skus:"",assembles:"",coupon_id:"",contentText:"",code:"",normalcan:"",showVideo:!0,share_title:"",user:!1,userInfo:""}},onLoad:function(t){if(this.userInfo=e.getStorageSync("userInfo"),this.authKey=e.getStorageSync("authKey"),this.authKey&&this.checkSession(),this.biId=t.id,console.log(t),this.invite_code=t.invite_code,t.scene){var i=/%26/g;if(i.test(t.scene)){var s=t.scene.split("%26");this.biId=s[0],this.invite_code=s[1]}else this.biId=t.scene}this.getListDetail(),this.getListComments(),this.gofight()},onShareAppMessage:function(e){return"button"===e.from&&console.log(this.code),{title:this.share_title,path:"/pages/service/detail?id="+this.biId+"&invite_code="+this.code,imageUrl:this.content.cover}},computed:{calHeight:function(){if(this.assembles){var t=this.assembles.length;return e.upx2px(120*t)+"px"}return"0px"},csene:function(){return this.biId+"&"+this.code}},methods:{checkSession:function(){var t=this;e.request({url:this.http+"user/checkSession",method:"POST",header:{authKey:this.authKey},data:{},success:function(i){101==i.data.code&&(t.authKey="",e.setStorageSync("authKey",""))}})},wxGetUserInfo:function(t){var i=this;if(!t.detail.iv)return e.showToast({title:"您取消了授权,登录失败",icon:"none"}),!1;var s=t.detail.userInfo,a=t.detail.encryptedData,n=t.detail.iv;e.login({provider:"weixin",success:function(t){console.log(t.code,"login");t.code;t.code?e.request({url:i.http+"user/token",method:"GET",data:{login_code:t.code,encrypted_data:a,iv:n},success:function(t){if(200==t.data.code){var a=t.data.data.authkey;i.authKey=a,i.userInfo=s,e.setStorageSync("authKey",a),e.setStorageSync("userInfo",s),i.user=!1,i.gofight()}else e.showToast({title:t.data.error,icon:"none"})}}):console.log("登录失败！"+t.errMsg)}})},close:function(t){this.user=!1,e.showToast({title:"未微信授权",icon:"none",mask:!1,duration:1500})},gofight:function(){var t=this;e.request({url:this.http+"home/profile",method:"GET",header:{authKey:this.authKey},data:{},success:function(e){200==e.data.code&&(t.code=e.data.data.invite_code)}})},getElSize:function(t){return console.log(t),new Promise((function(i,s){e.createSelectorQuery().select("#"+t).fields({size:!0,scrollOffset:!0},(function(e){i(e)})).exec()}))},tapTab:function(e){var t=this;return o(s.default.mark((function i(){var a,n;return s.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.symbolId=e.currentTarget.id,console.log(t.symbolId),t.tabIndex!==e.target.dataset.current){i.next=6;break}return i.abrupt("return",!1);case 6:return i.next=8,t.getElSize("tab-bar");case 8:a=i.sent,n=a.scrollLeft,t.scrollLeft=n,t.isClickChange=!0,t.tabIndex=e.target.dataset.current;case 13:case"end":return i.stop()}}),i)})))()},getListDetail:function(){var t=this;e.request({url:this.http+"service/detail/"+this.biId,method:"GET",header:{authKey:this.authKey},data:{},success:function(e){console.log(e.data);var i=t;if(200==e.data.code){if(t.content=e.data.data,t.content.video=t.content.vedio,t.content.vedio=t.static+t.content.vedio,t.content.cover=t.static+t.content.cover,t.share_title=t.content.share_title,t.price_minA=e.data.data.price.assemble,t.price_minN=e.data.data.price.normal,t.prices=e.data.data.price.normal.price_min,t.priceA=e.data.data.price.assemble.price_min,t.carousel=e.data.data.carousel,t.carousel)for(var s in t.carousel)t.carousel[s]=i.static+t.carousel[s];t.assemble=e.data.data.price.assemble.items,t.normal=e.data.data.price.normal.items,t.group=e.data.data.price.assemble.items[0],t.assembles=e.data.data.assembles,console.log(t.assembles),t.contentText=e.data.data.content}}})},getListComments:function(){var t=this;e.request({url:this.http+"comment/overview/"+this.biId,method:"GET",header:{authKey:this.authKey},data:{},success:function(e){console.log(e.data),200==e.data.code&&(t.evaluate=e.data.data.present,t.number=e.data.data,t.count=e.data.data.count)}})},home:function(){e.reLaunch({url:"/pages/knowledge/knowledge"})},goevaluat:function(){e.navigateTo({url:"/pages/mine/evaluate/viewRatings?id="+this.biId})},goGroupList:function(t){var i=this;""!=this.authKey?(this.cassemble_id=t.id,e.request({url:this.http+"assemble/detail/"+t.id,method:"GET",header:{authKey:this.authKey},data:{},success:function(t){console.log(t.data),200==t.data.code?(i.normalcan=t.data.data.skus.items,i.specificatbuycan=!0):e.showToast({title:t.data.error,icon:"none"})}})):this.user=!0},chooseCan:function(t,i){0==t.available?e.showToast({title:"体验价不可使用",icon:"none",duration:1500}):(console.log(t),this.index=i,this.buyTimes=t.name+"("+t.times+"次)",this.prices=t.prices.final_price,this.bsku_id=t.id)},choose:function(t,i){0==t.available?e.showToast({title:"体验价不可使用",icon:"none",duration:1500}):(this.index=i,this.buyTimes=t.name+"("+t.times+"次)",this.prices=t.price,this.bsku_id=t.id)},chooseGroup:function(e,t){this.agindex=t,this.specif=e.name+"("+e.times+"次)",console.log(e),this.priceA=e.price,this.group=e,this.bsku_id=e.id,this.bassemble_skus="",this.specG="",this.azindex=-1},Groupnum:function(e,t){this.azindex=t,this.priceA=e.final_price,this.specG=e.name,this.bassemble_skus=e.id},gomore:function(){this.spellGroup=!0},closeGroup:function(){this.spellGroup=!1},buyDirect:function(){""!=this.authKey?(this.specificatbuy=!0,this.showVideo=!1):this.user=!0},sureBuyDirect:function(){this.specificatbuy=!1,this.specificatbuycan=!1},gobuy:function(){var t=this;if(""!=this.bsku_id){this.spellGroup=!1;e.request({url:this.http+"order/preview",method:"POST",header:{authKey:this.authKey},data:{product_id:this.biId,sku_id:this.bsku_id,assemble_id:this.cassemble_id,coupon_id:this.coupon_id,invite_code:this.invite_code},success:function(i){if(console.log(i),200==i.data.code){var s=i.data.data;s.item.product.cover=t.static+s.item.product.cover,e.navigateTo({url:"/pages/order/confirmOrder?data="+encodeURIComponent(JSON.stringify(s))})}else e.showToast({title:i.data.error,icon:"none"})}})}else e.showToast({title:"请选择商品规格",icon:"none",duration:1500})},spellgroupbuy:function(){var t=this;if(""!=this.bsku_id)if(""!=this.bassemble_skus){var i=this;e.request({url:this.http+"assemble/preview",method:"POST",header:{authKey:this.authKey},data:{product_id:this.biId,sku_id:this.bsku_id,category_id:this.bassemble_skus},success:function(s){if(console.log(s.data),200==s.data.code){var a=s.data.data;a.product.cover=i.static+a.product.cover,e.navigateTo({url:"/pages/order/spellconfirmOrder?data="+encodeURIComponent(JSON.stringify(a))})}else 101==s.data.code&&(t.user=!0)}})}else e.showToast({title:"请选择拼团人数",icon:"none",duration:1500});else e.showToast({title:"请选择商品规格",icon:"none",duration:1500})},buy:function(){this.specificat=!0,this.showVideo=!1},goclose:function(){this.specificat=!1,this.specificatbuy=!1,this.specificatbuycan=!1,this.cassemble_id="",this.showVideo=!0}}};t.default=c}).call(this,i("543d")["default"])},fdb0:function(e,t,i){}},[["06fe","common/runtime","common/vendor"]]]);